<!-- Add this section to your form, replacing the single "Generate Affidavit" button -->

<div class="button-group">
  <button type="button" id="generateStandard" class="btn btn-primary">
    Generate Affidavit (Standard)
  </button>
  
  <button type="button" id="generatePS" class="btn btn-secondary">
    Generate Affidavit (Process Server)
  </button>
</div>

<script>
// Update your existing JavaScript to handle both buttons

document.getElementById('generateStandard').addEventListener('click', function() {
  generateAffidavit('/.netlify/functions/generate-affidavit');
});

document.getElementById('generatePS').addEventListener('click', function() {
  generateAffidavit('/.netlify/functions/generate-affidavit-ps');
});

// Your existing generateAffidavit function, modified to accept endpoint parameter
async function generateAffidavit(endpoint) {
  // Your existing form validation code here
  
  const formData = {
    caseNumber: document.getElementById('caseNumber').value,
    claimant: document.getElementById('claimant').value,
    defendantName: document.getElementById('defendantName').value,
    allDefendants: getAllDefendants(), // your existing function
    gpcText: document.getElementById('gpcText').value
  };
  
  try {
    const response = await fetch(endpoint, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(formData)
    });
    
    if (!response.ok) {
      throw new Error(`Server returned ${response.status}`);
    }
    
    const blob = await response.blob();
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `Affidavit_${formData.caseNumber}_${formData.defendantName}.docx`;
    document.body.appendChild(a);
    a.click();
    window.URL.revokeObjectURL(url);
    document.body.removeChild(a);
    
  } catch (error) {
    console.error('Error generating affidavit:', error);
    alert('Error generating affidavit: ' + error.message);
  }
}
</script>
